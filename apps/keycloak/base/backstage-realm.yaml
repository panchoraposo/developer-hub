apiVersion: k8s.keycloak.org/v2alpha1
kind: KeycloakRealmImport
metadata:
  name: backstage-realm
  namespace: keycloak
spec:
  keycloakCRName: rhbk
  realm:
    id: 64b4f393-1479-48ed-9b96-5d704cdb270a
    realm: backstage-realm
    notBefore: 0
    defaultSignatureAlgorithm: RS256
    revokeRefreshToken: false
    refreshTokenMaxReuse: 0
    accessTokenLifespan: 300
    accessTokenLifespanForImplicitFlow: 900
    ssoSessionIdleTimeout: 1800
    ssoSessionMaxLifespan: 36000
    ssoSessionIdleTimeoutRememberMe: 0
    ssoSessionMaxLifespanRememberMe: 0
    offlineSessionIdleTimeout: 2592000
    offlineSessionMaxLifespanEnabled: false
    offlineSessionMaxLifespan: 5184000
    clientSessionIdleTimeout: 0
    clientSessionMaxLifespan: 0
    clientOfflineSessionIdleTimeout: 0
    clientOfflineSessionMaxLifespan: 0
    accessCodeLifespan: 60
    accessCodeLifespanUserAction: 300
    accessCodeLifespanLogin: 1800
    actionTokenGeneratedByAdminLifespan: 43200
    actionTokenGeneratedByUserLifespan: 300
    oauth2DeviceCodeLifespan: 600
    oauth2DevicePollingInterval: 5
    enabled: true
    sslRequired: external
    registrationAllowed: false
    registrationEmailAsUsername: false
    rememberMe: false
    verifyEmail: false
    loginWithEmailAllowed: true
    duplicateEmailsAllowed: false
    resetPasswordAllowed: false
    editUsernameAllowed: false
    bruteForceProtected: false
    permanentLockout: false
    maxTemporaryLockouts: 0
    bruteForceStrategy: MULTIPLE
    maxFailureWaitSeconds: 900
    minimumQuickLoginWaitSeconds: 60
    waitIncrementSeconds: 60
    quickLoginCheckMilliSeconds: 1000
    maxDeltaTimeSeconds: 43200
    failureFactor: 30
    roles:
      realm:
      - id: 161df136-673d-4220-874d-fa58bbb088a9
        name: uma_authorization
        description: "${role_uma_authorization}"
        composite: false
        clientRole: false
        containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
        attributes: {}
      - id: 907973f0-285d-47bf-8ee8-2b1a700f692f
        name: default-roles-backstage-realm
        description: "${role_default-roles}"
        composite: true
        composites:
          realm:
          - offline_access
          - uma_authorization
          client:
            account:
            - view-profile
            - manage-account
        clientRole: false
        containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
        attributes: {}
      - id: '0586f37a-dfc0-475e-9121-e61adc86133d'
        name: developers
        description: ''
        composite: false
        clientRole: false
        containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
        attributes: {}
      - id: 5b52ab96-4af4-494b-a962-54d4e8549480
        name: platform-engineers
        description: ''
        composite: false
        clientRole: false
        containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
        attributes: {}
      - id: da4791ea-bcf8-4870-a024-9618e4177a66
        name: offline_access
        description: "${role_offline-access}"
        composite: false
        clientRole: false
        containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
        attributes: {}
    groups: []
    defaultRole:
      id: 907973f0-285d-47bf-8ee8-2b1a700f692f
      name: default-roles-backstage-realm
      description: "${role_default-roles}"
      composite: true
      clientRole: false
      containerId: 64b4f393-1479-48ed-9b96-5d704cdb270a
    requiredCredentials:
    - password
    otpPolicyType: totp
    otpPolicyAlgorithm: HmacSHA1
    otpPolicyInitialCounter: 0
    otpPolicyDigits: 6
    otpPolicyLookAheadWindow: 1
    otpPolicyPeriod: 30
    otpPolicyCodeReusable: false
    otpSupportedApplications:
    - totpAppFreeOTPName
    - totpAppGoogleName
    - totpAppMicrosoftAuthenticatorName
    localizationTexts: {}
    webAuthnPolicyRpEntityName: keycloak
    webAuthnPolicySignatureAlgorithms:
    - ES256
    - RS256
    webAuthnPolicyRpId: ''
    webAuthnPolicyAttestationConveyancePreference: not specified
    webAuthnPolicyAuthenticatorAttachment: not specified
    webAuthnPolicyRequireResidentKey: not specified
    webAuthnPolicyUserVerificationRequirement: not specified
    webAuthnPolicyCreateTimeout: 0
    webAuthnPolicyAvoidSameAuthenticatorRegister: false
    webAuthnPolicyAcceptableAaguids: []
    webAuthnPolicyExtraOrigins: []
    webAuthnPolicyPasswordlessRpEntityName: keycloak
    webAuthnPolicyPasswordlessSignatureAlgorithms:
    - ES256
    - RS256
    webAuthnPolicyPasswordlessRpId: ''
    webAuthnPolicyPasswordlessAttestationConveyancePreference: not specified
    webAuthnPolicyPasswordlessAuthenticatorAttachment: not specified
    webAuthnPolicyPasswordlessRequireResidentKey: not specified
    webAuthnPolicyPasswordlessUserVerificationRequirement: not specified
    webAuthnPolicyPasswordlessCreateTimeout: 0
    webAuthnPolicyPasswordlessAvoidSameAuthenticatorRegister: false
    webAuthnPolicyPasswordlessAcceptableAaguids: []
    webAuthnPolicyPasswordlessExtraOrigins: []
    scopeMappings:
    - clientScope: offline_access
      roles:
      - offline_access
    clientScopes:
    - id: 4d610e23-1ae9-4ec2-826c-84aaea4b5835
      name: email
      description: 'OpenID Connect built-in scope: email'
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        consent.screen.text: "${emailScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: e7940aaf-ef32-445b-ade6-8d60d3888ee1
        name: email
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: email
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: email
          jsonType.label: String
      - id: 73c3eaf1-c724-4b37-b5cc-fc65ca710e8d
        name: email verified
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: emailVerified
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: email_verified
          jsonType.label: boolean
    - id: fceaa646-1983-41c5-99f9-e977a05c9c85
      name: saml_organization
      description: Organization Membership
      protocol: saml
      attributes:
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: ed33db01-445e-4702-b157-49e6c16058aa
        name: organization
        protocol: saml
        protocolMapper: saml-organization-membership-mapper
        consentRequired: false
        config: {}
    - id: 9e2bd354-5ddf-44af-b28f-e4c28085def1
      name: organization
      description: Additional claims about the organization a subject belongs to
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        consent.screen.text: "${organizationScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: 60379665-f736-4076-96d0-264bc7eddb64
        name: organization
        protocol: openid-connect
        protocolMapper: oidc-organization-membership-mapper
        consentRequired: false
        config:
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: organization
          jsonType.label: String
          multivalued: 'true'
    - id: 50caffb6-e42c-4ba1-b1d9-079800ab6756
      name: phone
      description: 'OpenID Connect built-in scope: phone'
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        consent.screen.text: "${phoneScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: cf33a60e-1cee-423d-beb6-0ab4b356cd78
        name: phone number
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: phoneNumber
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: phone_number
          jsonType.label: String
      - id: 7e26f551-387e-49a3-84f3-91be7947f418
        name: phone number verified
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: phoneNumberVerified
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: phone_number_verified
          jsonType.label: boolean
    - id: b192c2a1-0d64-4740-81e8-fbbd52267748
      name: acr
      description: OpenID Connect scope for add acr (authentication context class reference)
        to the token
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'false'
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: e0622f4e-8606-4f50-b054-2b5a0acb26e8
        name: acr loa level
        protocol: openid-connect
        protocolMapper: oidc-acr-mapper
        consentRequired: false
        config:
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
    - id: 74aba805-97a6-45b1-91cd-98a10fccafae
      name: profile
      description: 'OpenID Connect built-in scope: profile'
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        consent.screen.text: "${profileScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: 73c6a3ec-0c43-4f81-bd44-bf7705530e97
        name: birthdate
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: birthdate
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: birthdate
          jsonType.label: String
      - id: 7b47eac7-0532-4ef7-b8fd-9cffcbb769e6
        name: family name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: lastName
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: family_name
          jsonType.label: String
      - id: 50dad6a2-f740-4c89-93b5-f6b0b8491660
        name: middle name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: middleName
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: middle_name
          jsonType.label: String
      - id: f94358b2-9e4e-4b9b-916f-ef37ddd5a9fb
        name: locale
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: locale
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: locale
          jsonType.label: String
      - id: b57e2006-60a2-4b6d-9e5b-cb2fb67e06c3
        name: gender
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: gender
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: gender
          jsonType.label: String
      - id: f9b46ecf-f6a0-454c-b987-1286fc75cbb7
        name: given name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: firstName
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: given_name
          jsonType.label: String
      - id: b2a4ad6b-1228-4504-9b73-19ce71b7afc3
        name: full name
        protocol: openid-connect
        protocolMapper: oidc-full-name-mapper
        consentRequired: false
        config:
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          userinfo.token.claim: 'true'
      - id: a45771ea-c897-4bcb-8cb7-918d28e3e873
        name: nickname
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: nickname
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: nickname
          jsonType.label: String
      - id: 3301bfa4-3476-40e0-ae91-cbd39f19f82e
        name: username
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: username
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: preferred_username
          jsonType.label: String
      - id: d5c840c3-d135-4794-b55e-591e6e9af96e
        name: updated at
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: updatedAt
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: updated_at
          jsonType.label: long
      - id: da9809ed-e3ad-49a2-8822-2f7fd07df197
        name: picture
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: picture
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: picture
          jsonType.label: String
      - id: eb9636eb-59f9-4979-bbf9-e5c9d4152b11
        name: profile
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: profile
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: profile
          jsonType.label: String
      - id: 1722476e-b370-41c4-9f43-9d8943701a47
        name: zoneinfo
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: zoneinfo
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: zoneinfo
          jsonType.label: String
      - id: 6acfa632-39ea-4b06-a472-516a605a118a
        name: website
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: website
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: website
          jsonType.label: String
    - id: 141da8d0-10cb-4cf6-a102-1710476c80b3
      name: offline_access
      description: 'OpenID Connect built-in scope: offline_access'
      protocol: openid-connect
      attributes:
        consent.screen.text: "${offlineAccessScopeConsentText}"
        display.on.consent.screen: 'true'
    - id: 21c00288-ea8a-40fb-aacb-2ea25c06d700
      name: web-origins
      description: OpenID Connect scope for add allowed web origins to the access token
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'false'
        consent.screen.text: ''
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: 52bd73bd-fa3d-4fa1-8cd6-887e0f602752
        name: allowed web origins
        protocol: openid-connect
        protocolMapper: oidc-allowed-origins-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          access.token.claim: 'true'
    - id: 2d801b15-c8b2-4b63-91e6-3b5ce90c533c
      name: basic
      description: OpenID Connect scope for add all basic claims to the token
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'false'
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: e6166ab5-5ea7-42b0-b34e-b8fbb4068ee1
        name: auth_time
        protocol: openid-connect
        protocolMapper: oidc-usersessionmodel-note-mapper
        consentRequired: false
        config:
          user.session.note: AUTH_TIME
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: auth_time
          jsonType.label: long
      - id: e6d1a56f-0657-4588-9912-ada56a800d03
        name: sub
        protocol: openid-connect
        protocolMapper: oidc-sub-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          access.token.claim: 'true'
    - id: 05c4efdd-62aa-48f2-ae65-6ad039fc6c75
      name: service_account
      description: Specific scope for a client enabled for service accounts
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'false'
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: 3e20b414-579b-4c8f-aa9e-ddde7bbf121f
        name: Client IP Address
        protocol: openid-connect
        protocolMapper: oidc-usersessionmodel-note-mapper
        consentRequired: false
        config:
          user.session.note: clientAddress
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: clientAddress
          jsonType.label: String
      - id: 0fdfedba-d2d1-4540-91a7-d00ac59dd7bc
        name: Client ID
        protocol: openid-connect
        protocolMapper: oidc-usersessionmodel-note-mapper
        consentRequired: false
        config:
          user.session.note: client_id
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: client_id
          jsonType.label: String
      - id: a29d2ca9-df97-4397-9b81-307e4f079715
        name: Client Host
        protocol: openid-connect
        protocolMapper: oidc-usersessionmodel-note-mapper
        consentRequired: false
        config:
          user.session.note: clientHost
          id.token.claim: 'true'
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: clientHost
          jsonType.label: String
    - id: 280b9d6c-108b-4517-a708-7020e6dc2bed
      name: microprofile-jwt
      description: Microprofile - JWT built-in scope
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        display.on.consent.screen: 'false'
      protocolMappers:
      - id: dccef8c0-87f1-4d7b-a574-40af49e6342a
        name: groups
        protocol: openid-connect
        protocolMapper: oidc-usermodel-realm-role-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          multivalued: 'true'
          user.attribute: foo
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: groups
          jsonType.label: String
      - id: e47845df-aeb0-4fd6-9e60-edd8e23ce851
        name: upn
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          userinfo.token.claim: 'true'
          user.attribute: username
          id.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: upn
          jsonType.label: String
    - id: 20019fca-b93a-454c-8802-28adf6240ea8
      name: roles
      description: OpenID Connect scope for add user roles to the access token
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'false'
        consent.screen.text: "${rolesScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: daf451f0-3144-4880-9b35-210adc41ea76
        name: client roles
        protocol: openid-connect
        protocolMapper: oidc-usermodel-client-role-mapper
        consentRequired: false
        config:
          user.attribute: foo
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: resource_access.${client_id}.roles
          jsonType.label: String
          multivalued: 'true'
      - id: 8b426e87-fc6d-4d48-9243-19c2aa908a62
        name: audience resolve
        protocol: openid-connect
        protocolMapper: oidc-audience-resolve-mapper
        consentRequired: false
        config:
          introspection.token.claim: 'true'
          access.token.claim: 'true'
      - id: 3e2ccbdc-230b-4cf8-aa83-896b4c67edd2
        name: realm roles
        protocol: openid-connect
        protocolMapper: oidc-usermodel-realm-role-mapper
        consentRequired: false
        config:
          user.attribute: foo
          introspection.token.claim: 'true'
          access.token.claim: 'true'
          claim.name: realm_access.roles
          jsonType.label: String
          multivalued: 'true'
    - id: 4926cee4-9291-4c99-b56e-14c45ca8f205
      name: address
      description: 'OpenID Connect built-in scope: address'
      protocol: openid-connect
      attributes:
        include.in.token.scope: 'true'
        consent.screen.text: "${addressScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: d416665d-2afa-4b46-bf51-032f7ea04e30
        name: address
        protocol: openid-connect
        protocolMapper: oidc-address-mapper
        consentRequired: false
        config:
          user.attribute.formatted: formatted
          user.attribute.country: country
          introspection.token.claim: 'true'
          user.attribute.postal_code: postal_code
          userinfo.token.claim: 'true'
          user.attribute.street: street
          id.token.claim: 'true'
          user.attribute.region: region
          access.token.claim: 'true'
          user.attribute.locality: locality
    - id: 526b21b1-fed3-488c-95e9-a3fd3ae2fd41
      name: role_list
      description: SAML role list
      protocol: saml
      attributes:
        consent.screen.text: "${samlRoleListScopeConsentText}"
        display.on.consent.screen: 'true'
      protocolMappers:
      - id: 950284f2-b011-4db7-bda1-ded319b87cf1
        name: role list
        protocol: saml
        protocolMapper: saml-role-list-mapper
        consentRequired: false
        config:
          single: 'false'
          attribute.nameformat: Basic
          attribute.name: Role
    defaultDefaultClientScopes:
    - role_list
    - saml_organization
    - profile
    - email
    - roles
    - web-origins
    - acr
    - basic
    defaultOptionalClientScopes:
    - offline_access
    - address
    - phone
    - microprofile-jwt
    - organization
    browserSecurityHeaders:
      contentSecurityPolicyReportOnly: ''
      xContentTypeOptions: nosniff
      referrerPolicy: no-referrer
      xRobotsTag: none
      xFrameOptions: SAMEORIGIN
      contentSecurityPolicy: frame-src 'self'; frame-ancestors 'self'; object-src 'none';
      strictTransportSecurity: max-age=31536000; includeSubDomains
    smtpServer: {}
    eventsEnabled: false
    eventsListeners:
    - jboss-logging
    enabledEventTypes: []
    adminEventsEnabled: false
    adminEventsDetailsEnabled: false
    identityProviders: []
    identityProviderMappers: []
    components:
      org.keycloak.services.clientregistration.policy.ClientRegistrationPolicy:
      - id: 933968ad-6792-447c-9475-d87e2b2772b2
        name: Max Clients Limit
        providerId: max-clients
        subType: anonymous
        subComponents: {}
        config:
          max-clients:
          - '200'
      - id: bac01ebb-152c-477d-9ba2-2c53d7b956b9
        name: Allowed Protocol Mapper Types
        providerId: allowed-protocol-mappers
        subType: authenticated
        subComponents: {}
        config:
          allowed-protocol-mapper-types:
          - oidc-address-mapper
          - saml-user-property-mapper
          - oidc-usermodel-attribute-mapper
          - saml-user-attribute-mapper
          - oidc-full-name-mapper
          - oidc-sha256-pairwise-sub-mapper
          - saml-role-list-mapper
          - oidc-usermodel-property-mapper
      - id: 50b09a10-a892-446f-9d99-e4afbfd11561
        name: Trusted Hosts
        providerId: trusted-hosts
        subType: anonymous
        subComponents: {}
        config:
          host-sending-registration-request-must-match:
          - 'true'
          client-uris-must-match:
          - 'true'
      - id: ff0cd5e6-db84-408c-ad74-bb8296f6783c
        name: Consent Required
        providerId: consent-required
        subType: anonymous
        subComponents: {}
        config: {}
      - id: cd5a8472-d905-4204-8ca4-0c1cbce63dcb
        name: Allowed Client Scopes
        providerId: allowed-client-templates
        subType: anonymous
        subComponents: {}
        config:
          allow-default-scopes:
          - 'true'
      - id: 586909ec-f92e-4b24-8692-422ea9671ba8
        name: Allowed Protocol Mapper Types
        providerId: allowed-protocol-mappers
        subType: anonymous
        subComponents: {}
        config:
          allowed-protocol-mapper-types:
          - oidc-full-name-mapper
          - saml-user-attribute-mapper
          - oidc-address-mapper
          - saml-role-list-mapper
          - oidc-usermodel-property-mapper
          - oidc-sha256-pairwise-sub-mapper
          - oidc-usermodel-attribute-mapper
          - saml-user-property-mapper
      - id: c67ccd97-161e-4c11-aa58-f4ca5c74e4c6
        name: Allowed Client Scopes
        providerId: allowed-client-templates
        subType: authenticated
        subComponents: {}
        config:
          allow-default-scopes:
          - 'true'
      - id: 3aba670b-bf68-4f72-8d02-d84f6934793e
        name: Full Scope Disabled
        providerId: scope
        subType: anonymous
        subComponents: {}
        config: {}
      org.keycloak.keys.KeyProvider:
      - id: 0d834a37-017c-46e7-874b-5634eeb27c95
        name: aes-generated
        providerId: aes-generated
        subComponents: {}
        config:
          priority:
          - '100'
      - id: 38676d83-ae9b-46c8-8aca-a0cc11bc0122
        name: rsa-enc-generated
        providerId: rsa-enc-generated
        subComponents: {}
        config:
          priority:
          - '100'
          algorithm:
          - RSA-OAEP
      - id: 2deda119-4052-4e4e-82e1-dfa89a9620b3
        name: hmac-generated-hs512
        providerId: hmac-generated
        subComponents: {}
        config:
          priority:
          - '100'
          algorithm:
          - HS512
      - id: 5d499b06-95fe-4145-969c-66eab8cf95d3
        name: rsa-generated
        providerId: rsa-generated
        subComponents: {}
        config:
          priority:
          - '100'
    internationalizationEnabled: false
    supportedLocales: []
    authenticationFlows:
    - id: ef20b54c-3b66-4022-91a9-fd044a3d6af9
      alias: Account verification options
      description: Method with which to verity the existing account
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: idp-email-verification
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: ALTERNATIVE
        priority: 20
        autheticatorFlow: true
        flowAlias: Verify Existing Account by Re-authentication
        userSetupAllowed: false
    - id: f90e2f51-60a2-4e03-a34e-191b3de5c43a
      alias: Browser - Conditional OTP
      description: Flow to determine if the OTP is required for the authentication
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: auth-otp-form
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 92139866-64e2-4219-a239-ce7e4a6b5813
      alias: Browser - Conditional Organization
      description: Flow to determine if the organization identity-first login is to be
        used
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: organization
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 311c1d3d-2c7f-4065-8298-37e4a1221b3d
      alias: Direct Grant - Conditional OTP
      description: Flow to determine if the OTP is required for the authentication
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: direct-grant-validate-otp
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 6d0604b2-0eb6-4484-8f52-fa2b2d358dd5
      alias: First Broker Login - Conditional Organization
      description: Flow to determine if the authenticator that adds organization members
        is to be used
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: idp-add-organization-member
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 8b474999-2b38-40c9-8aba-3c208b2914a4
      alias: First broker login - Conditional OTP
      description: Flow to determine if the OTP is required for the authentication
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: auth-otp-form
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 4f3c2057-a795-43f9-8dc2-5072b9fbb963
      alias: Handle Existing Account
      description: Handle what to do if there is existing account with same email/username
        like authenticated identity provider
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: idp-confirm-link
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: true
        flowAlias: Account verification options
        userSetupAllowed: false
    - id: 32727ad2-1dca-496e-a34f-becd84b85e0a
      alias: Organization
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 10
        autheticatorFlow: true
        flowAlias: Browser - Conditional Organization
        userSetupAllowed: false
    - id: e98ba94a-935c-482c-9a09-f6fde932358e
      alias: Reset - Conditional OTP
      description: Flow to determine if the OTP should be reset or not. Set to REQUIRED
        to force.
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: reset-otp
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
    - id: b55c4d5f-5516-44c5-b6de-cda5e768e584
      alias: User creation or linking
      description: Flow for the existing/non-existing user alternatives
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticatorConfig: create unique user config
        authenticator: idp-create-user-if-unique
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: ALTERNATIVE
        priority: 20
        autheticatorFlow: true
        flowAlias: Handle Existing Account
        userSetupAllowed: false
    - id: b0b89c46-c3f4-4c4a-bf78-7f5bc8f7d163
      alias: Verify Existing Account by Re-authentication
      description: Reauthentication of existing account
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: idp-username-password-form
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 20
        autheticatorFlow: true
        flowAlias: First broker login - Conditional OTP
        userSetupAllowed: false
    - id: 32ee0f30-3100-4ca2-8d1c-235e2738142e
      alias: browser
      description: Browser based authentication
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: auth-cookie
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: auth-spnego
        authenticatorFlow: false
        requirement: DISABLED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: identity-provider-redirector
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 25
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: ALTERNATIVE
        priority: 26
        autheticatorFlow: true
        flowAlias: Organization
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: ALTERNATIVE
        priority: 30
        autheticatorFlow: true
        flowAlias: forms
        userSetupAllowed: false
    - id: 021dcad9-6d30-4e3c-ba53-8fca2e5baaa6
      alias: clients
      description: Base authentication for clients
      providerId: client-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: client-secret
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: client-jwt
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: client-secret-jwt
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 30
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: client-x509
        authenticatorFlow: false
        requirement: ALTERNATIVE
        priority: 40
        autheticatorFlow: false
        userSetupAllowed: false
    - id: a76c12c7-317e-436d-b7ca-cf019c4b0c16
      alias: direct grant
      description: OpenID Connect Resource Owner Grant
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: direct-grant-validate-username
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: direct-grant-validate-password
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 30
        autheticatorFlow: true
        flowAlias: Direct Grant - Conditional OTP
        userSetupAllowed: false
    - id: '078d34ca-e3fa-4df8-800a-6097bbd56f35'
      alias: docker auth
      description: Used by Docker clients to authenticate against the IDP
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: docker-http-basic-authenticator
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
    - id: bec0bc0f-892f-4c13-bad9-54f8133c16a4
      alias: first broker login
      description: Actions taken after first broker login with identity provider account,
        which is not yet linked to any Keycloak account
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticatorConfig: review profile config
        authenticator: idp-review-profile
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: true
        flowAlias: User creation or linking
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 50
        autheticatorFlow: true
        flowAlias: First Broker Login - Conditional Organization
        userSetupAllowed: false
    - id: 970e193f-20fb-42de-882a-980e3bdc3df2
      alias: forms
      description: Username, password, otp and other auth forms.
      providerId: basic-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: auth-username-password-form
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 20
        autheticatorFlow: true
        flowAlias: Browser - Conditional OTP
        userSetupAllowed: false
    - id: 26a09262-6e1a-4537-8539-e45dd4a4b9ed
      alias: registration
      description: Registration flow
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: registration-page-form
        authenticatorFlow: true
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: true
        flowAlias: registration form
        userSetupAllowed: false
    - id: f13e7294-0fcc-4a37-abe5-20032b4b9ea7
      alias: registration form
      description: Registration form
      providerId: form-flow
      topLevel: false
      builtIn: true
      authenticationExecutions:
      - authenticator: registration-user-creation
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: registration-password-action
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 50
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: registration-recaptcha-action
        authenticatorFlow: false
        requirement: DISABLED
        priority: 60
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: registration-terms-and-conditions
        authenticatorFlow: false
        requirement: DISABLED
        priority: 70
        autheticatorFlow: false
        userSetupAllowed: false
    - id: 1b2abfbb-15c1-4017-93ef-c9083734b7be
      alias: reset credentials
      description: Reset credentials for a user if they forgot their password or something
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: reset-credentials-choose-user
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: reset-credential-email
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 20
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticator: reset-password
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 30
        autheticatorFlow: false
        userSetupAllowed: false
      - authenticatorFlow: true
        requirement: CONDITIONAL
        priority: 40
        autheticatorFlow: true
        flowAlias: Reset - Conditional OTP
        userSetupAllowed: false
    - id: 70ff9ac4-ccb5-42c9-b7cc-3c52002cbf6d
      alias: saml ecp
      description: SAML ECP Profile Authentication Flow
      providerId: basic-flow
      topLevel: true
      builtIn: true
      authenticationExecutions:
      - authenticator: http-basic-authenticator
        authenticatorFlow: false
        requirement: REQUIRED
        priority: 10
        autheticatorFlow: false
        userSetupAllowed: false
    authenticatorConfig:
    - id: 52dba5ad-c279-46c8-be1d-99e8031f29a1
      alias: create unique user config
      config:
        require.password.update.after.registration: 'false'
    - id: 4f69cf1e-8430-48b3-b139-c41dbe2eff6e
      alias: review profile config
      config:
        update.profile.on.first.login: missing
    requiredActions:
    - alias: CONFIGURE_TOTP
      name: Configure OTP
      providerId: CONFIGURE_TOTP
      enabled: true
      defaultAction: false
      priority: 10
      config: {}
    - alias: TERMS_AND_CONDITIONS
      name: Terms and Conditions
      providerId: TERMS_AND_CONDITIONS
      enabled: false
      defaultAction: false
      priority: 20
      config: {}
    - alias: UPDATE_PASSWORD
      name: Update Password
      providerId: UPDATE_PASSWORD
      enabled: true
      defaultAction: false
      priority: 30
      config: {}
    - alias: UPDATE_PROFILE
      name: Update Profile
      providerId: UPDATE_PROFILE
      enabled: true
      defaultAction: false
      priority: 40
      config: {}
    - alias: VERIFY_EMAIL
      name: Verify Email
      providerId: VERIFY_EMAIL
      enabled: true
      defaultAction: false
      priority: 50
      config: {}
    - alias: delete_account
      name: Delete Account
      providerId: delete_account
      enabled: false
      defaultAction: false
      priority: 60
      config: {}
    - alias: webauthn-register
      name: Webauthn Register
      providerId: webauthn-register
      enabled: true
      defaultAction: false
      priority: 70
      config: {}
    - alias: webauthn-register-passwordless
      name: Webauthn Register Passwordless
      providerId: webauthn-register-passwordless
      enabled: true
      defaultAction: false
      priority: 80
      config: {}
    - alias: VERIFY_PROFILE
      name: Verify Profile
      providerId: VERIFY_PROFILE
      enabled: true
      defaultAction: false
      priority: 90
      config: {}
    - alias: delete_credential
      name: Delete Credential
      providerId: delete_credential
      enabled: true
      defaultAction: false
      priority: 100
      config: {}
    - alias: update_user_locale
      name: Update User Locale
      providerId: update_user_locale
      enabled: true
      defaultAction: false
      priority: 1000
      config: {}
    browserFlow: browser
    registrationFlow: registration
    directGrantFlow: direct grant
    resetCredentialsFlow: reset credentials
    clientAuthenticationFlow: clients
    dockerAuthenticationFlow: docker auth
    firstBrokerLoginFlow: first broker login
    attributes:
      cibaBackchannelTokenDeliveryMode: poll
      cibaExpiresIn: '120'
      cibaAuthRequestedUserHint: login_hint
      oauth2DeviceCodeLifespan: '600'
      oauth2DevicePollingInterval: '5'
      parRequestUriLifespan: '60'
      cibaInterval: '5'
      realmReusableOtpCode: 'false'
    keycloakVersion: 26.2.4.redhat-00002
    userManagedAccessAllowed: false
    organizationsEnabled: false
    verifiableCredentialsEnabled: false
    adminPermissionsEnabled: false
    clientProfiles:
      profiles: []
    clientPolicies:
      policies: []
